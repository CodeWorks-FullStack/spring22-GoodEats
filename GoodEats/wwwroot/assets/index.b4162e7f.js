import{r as F,c as b,a as g,o as c,b as u,d as s,e as p,F as P,f as Y,g as W,h as G,i as X,S as O,j as Q,t as l,k as I,w as E,p as R,l as S,m as k,n as J,M as L,q as Z,s as ee,u as M,v as N,x as te,y as oe,z as ne}from"./vendor.f8d2dd5c.js";const se=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}};se();const m=F({user:{},account:{},restaurants:[],activeRestaurant:{},restaurantReviews:[],profile:{},profileReviews:[]});var f=(t,e)=>{for(const[n,o]of e)t[n]=o;return t};const ae={name:"App",setup(){return{appState:b(()=>m)}}};function re(t,e,n,o,a,i){const r=g("Navbar"),_=g("router-view"),h=g("RestaurantModal");return c(),u(P,null,[s("header",null,[p(r)]),s("main",null,[p(_),p(h)])],64)}var ie=f(ae,[["render",re]]);const j=window.location.origin.includes("localhost"),q=j?"https://localhost:5001":"",ce="dev-wglcqf-n.us.auth0.com",le="https://MarkDev.com",de="La0Mv5rjSAdmXsSbXD7g8jUUfVLpdIwM",ue="modulepreload",D={},_e="/",T=function(e,n){return!n||n.length===0?e():Promise.all(n.map(o=>{if(o=`${_e}${o}`,o in D)return;D[o]=!0;const a=o.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${i}`))return;const r=document.createElement("link");if(r.rel=a?"stylesheet":ue,a||(r.as="script",r.crossOrigin=""),r.href=o,document.head.appendChild(r),a)return new Promise((_,h)=>{r.addEventListener("load",_),r.addEventListener("error",h)})})).then(()=>e())};function me(t){switch(t){case"./pages/AccountPage.vue":return T(()=>import("./AccountPage.5ce7f718.js"),["assets/AccountPage.5ce7f718.js","assets/AccountPage.1d38451d.css","assets/vendor.f8d2dd5c.js"]);case"./pages/HomePage.vue":return T(()=>import("./HomePage.de9444b6.js"),["assets/HomePage.de9444b6.js","assets/vendor.f8d2dd5c.js"]);case"./pages/ProfilePage.vue":return T(()=>import("./ProfilePage.38067988.js"),["assets/ProfilePage.38067988.js","assets/ProfilePage.b7717d7a.css","assets/vendor.f8d2dd5c.js"]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function A(t){return()=>me(`./pages/${t}.vue`)}const ge=[{path:"/",name:"Home",component:A("HomePage")},{path:"/profiles/:id",name:"Profile",component:A("ProfilePage")},{path:"/account",name:"Account",component:A("AccountPage"),beforeEnter:G}],B=Y({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:W(),routes:ge});function x(t,e){if(j)console[t](`[${t}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(t){case"log":case"assert":return}console[t](`[${t}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const v={log(){x("log",arguments)},error(){x("error",arguments)},warn(){x("warn",arguments)},assert(){x("assert",arguments)},trace(){x("trace",arguments)}},y=X.create({baseURL:q,timeout:8e3});class ve{async getAccount(){try{const e=await y.get("/account");m.account=e.data}catch(e){v.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}}const pe=new ve;class U{static async confirm(e="Are you sure?",n="You won't be able to revert this!",o="warning",a="Yes, delete it!"){try{return!!(await O.fire({title:e,text:n,icon:o,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:a})).isConfirmed}catch{return!1}}static toast(e="Warning!",n="warning",o="top-end",a=3e3,i=!0){O.fire({title:e,icon:n,position:o,timer:a,timerProgressBar:i,toast:!0,showConfirmButton:!1})}static error(e){var n;if(e.isAxiosError){const{response:o}=e;this.toast(((n=o.data.error)==null?void 0:n.message)||o.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}const fe={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class he{constructor(e=!1,n=q){}on(e,n){var o;return(o=this.socket)==null||o.on(e,n.bind(this)),this}onConnected(e){v.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){v.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var n;(n=this.socket)==null||n.emit(fe.authenticate,e)}onError(e){v.error("[SOCKET_ERROR]",e)}enqueue(e,n){v.log("[ENQUEING_ACTION]",{action:e,payload:n}),this.queue.push({action:e,payload:n})}playback(){v.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(n=>{this.emit(n.action,n.payload)})}emit(e,n=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,n);if(!this.connected)return this.enqueue(e,n);this.socket.emit(e,n)}}class we extends he{constructor(){super();this.on("error",this.onError)}onError(e){U.toast(e.message,"error")}}const V=new we,d=Q({domain:ce,clientId:de,audience:le,useRefreshTokens:!0,onRedirectCallback:t=>{B.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}});d.on(d.AUTH_EVENTS.AUTHENTICATED,async function(){y.defaults.headers.authorization=d.bearer,y.interceptors.request.use(be),m.user=d.user,await pe.getAccount(),V.authenticate(d.bearer)});async function be(t){if(!d.isAuthenticated)return t;const e=d.identity.exp*1e3,n=e<Date.now(),o=e<Date.now()+1e3*60*60*12;return n?await d.loginWithPopup():o&&(await d.getTokenSilently(),y.defaults.headers.authorization=d.bearer,V.authenticate(d.bearer)),t}const ye={setup(){return{user:b(()=>m.user),account:b(()=>m.account),async login(){d.loginWithPopup()},async logout(){d.logout({returnTo:window.location.origin})}}}},H=t=>(R("data-v-704bb442"),t=t(),S(),t),xe={class:"navbar-text"},Re={key:1,class:"dropdown my-2 my-lg-0"},Se={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},ke={key:0},Ee=["src"],Te={class:"mx-3 text-dark lighten-30"},Ae={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},$e=H(()=>s("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),Ce=H(()=>s("i",{class:"mdi mdi-logout"},null,-1)),Pe=k(" logout "),Oe=[Ce,Pe];function Ie(t,e,n,o,a,i){const r=g("router-link");return c(),u("span",xe,[o.user.isAuthenticated?(c(),u("div",Re,[s("div",Se,[o.account.picture?(c(),u("div",ke,[s("img",{src:o.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,Ee),s("span",Te,l(o.account.name),1)])):I("",!0)]),s("div",Ae,[p(r,{to:{name:"Account"}},{default:E(()=>[$e]),_:1}),s("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(..._)=>o.logout&&o.logout(..._))},Oe)])])):(c(),u("button",{key:0,class:"btn selectable text-dark lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(..._)=>o.login&&o.login(..._))}," Login "))])}var Le=f(ye,[["render",Ie],["__scopeId","data-v-704bb442"]]),Me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Le});const Ne={},je={class:"modal fade"},qe={class:"modal-dialog modal-xl modal-dialog-centered"},De={class:"modal-content"},Be={class:"modal-body p-0"};function Ue(t,e){return c(),u("div",je,[s("div",qe,[s("div",De,[s("div",Be,[J(t.$slots,"modal-body")])])])])}var Ve=f(Ne,[["render",Ue]]),He=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ve});const ze={setup(){return{}}},z=t=>(R("data-v-5f32408f"),t=t(),S(),t),Ke={class:"navbar navbar-expand-lg navbar-light bg-white px-3"},Fe=z(()=>s("div",{class:"d-flex flex-column align-items-center"},[s("img",{alt:"logo",src:"https://sk3xr2l1ehb173e733q2ty1q-wpengine.netdna-ssl.com/wp-content/uploads/GEB_LogoReworkFinal-1024x1024.png",height:"50"})],-1)),Ye=z(()=>s("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[s("span",{class:"navbar-toggler-icon"})],-1)),We={class:"collapse navbar-collapse d-md-flex justify-content-end",id:"navbarText"};function Ge(t,e,n,o,a,i){const r=g("router-link"),_=g("Login");return c(),u("nav",Ke,[p(r,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:E(()=>[Fe]),_:1}),Ye,s("div",We,[p(_)])])}var Xe=f(ze,[["render",Ge],["__scopeId","data-v-5f32408f"]]),Qe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xe});class Je{async getReviews(e){const n=await y.get(`api/restaurants/${e}/reviews`);v.log("[RESTAURANT REVS]",n.data),m.restaurantReviews=n.data}async getReviewsByProfileId(e){const n=await y.get(`api/profiles/${e}/reviews`);v.log("[Profile REVS]",n.data),m.profileReviews=n.data}}const Ze=new Je;const et={props:{restaurant:{type:Object,required:!0}},setup(t){return{async setActive(){try{m.activeRestaurant=t.restaurant,await Ze.getReviews(t.restaurant.id),L.getOrCreateInstance(document.getElementById("restaurant-modal")).show()}catch{U.toast("Restaurant not available")}}}}},tt=t=>(R("data-v-5f216336"),t=t(),S(),t),ot=["src"],nt={class:"d-flex flex-column justify-content-center ms-3"},st={class:"m-0 border-bottom border-danger"},at={class:"flex-grow-1 text-end p-3"},rt=tt(()=>s("i",{class:"mdi mdi-star text-warning"},null,-1));function it(t,e,n,o,a,i){return c(),u("div",{class:"restaurant bg-white d-flex rounded elevation-2",onClick:e[0]||(e[0]=(...r)=>o.setActive&&o.setActive(...r))},[s("img",{class:"object-fit rounded-start",src:n.restaurant.image,alt:""},null,8,ot),s("div",nt,[s("h3",st,l(n.restaurant.name),1),s("p",null,l(n.restaurant.address),1)]),s("div",at,[s("h2",null,[rt,k(l(n.restaurant.averageRating.toFixed(1))+" ("+l(n.restaurant.totalReviews)+")",1)])])])}var ct=f(et,[["render",it],["__scopeId","data-v-5f216336"]]),lt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ct});const dt={setup(){return{newReview:Z({rating:3}),restaurant:b(()=>m.activeRestaurant),reviews:b(()=>m.restaurantReviews),user:b(()=>m.user)}}},$=t=>(R("data-v-23d34c98"),t=t(),S(),t),ut={class:"container-fluid position-relative"},_t=$(()=>s("button",{type:"button",class:"btn-close position-absolute close-button","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),mt={class:"row"},gt={class:"col-md-6 col-12 p-0"},vt=["src"],pt={class:"col-md-6 col-12 p-5"},ft={class:"d-flex flex-column justify-content-center ms-3"},ht={class:"border-bottom border-danger d-flex justify-content-between"},wt={class:"m-0"},bt=$(()=>s("i",{class:"mdi mdi-star text-warning"},null,-1)),yt={key:0,class:"m-3 bg-danger darken-10"},xt={class:"p-4"},Rt={for:"rating",class:"form-label text-white"},St=$(()=>s("div",{class:"text-end"},[s("button",{class:"btn btn-success"},"Submit")],-1)),kt={class:"mx-3 reviews scrollable-y"};function Et(t,e,n,o,a,i){const r=g("Review"),_=g("Modal");return c(),ee(_,{id:"restaurant-modal"},{"modal-body":E(()=>{var h,C;return[s("div",ut,[_t,s("div",mt,[s("div",gt,[s("img",{class:"object-fit w-100 rounded-start",src:o.restaurant.image},null,8,vt)]),s("div",pt,[s("div",ft,[s("div",ht,[s("h3",wt,l((h=o.restaurant.name)==null?void 0:h.toUpperCase()),1),s("h3",null,[bt,k(l((C=o.restaurant.averageRating)==null?void 0:C.toFixed(1))+" ("+l(o.restaurant.totalReviews)+")",1)])]),s("p",null,l(o.restaurant.address),1)]),o.user.isAuthenticated?(c(),u("div",yt,[s("form",xt,[s("label",Rt,"Rating "+l(o.newReview.rating),1),M(s("input",{type:"range",class:"form-range",id:"rating",min:"1",max:"5",step:"1","onUpdate:modelValue":e[0]||(e[0]=w=>o.newReview.rating=w)},null,512),[[N,o.newReview.rating]]),M(s("textarea",{class:"w-100",placeholder:"Review...","onUpdate:modelValue":e[1]||(e[1]=w=>o.newReview.comment=w)},null,512),[[N,o.newReview.comment]]),St])])):I("",!0),s("div",kt,[(c(!0),u(P,null,te(o.reviews,w=>(c(),u("div",{key:w.id},[p(r,{review:w},null,8,["review"])]))),128))])])])])]}),_:1})}var Tt=f(dt,[["render",Et],["__scopeId","data-v-23d34c98"]]),At=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Tt});const $t={props:{review:{type:Object,required:!0}},setup(t){const e=oe();return{goToProfile(){L.getOrCreateInstance(document.getElementById("restaurant-modal")).hide(),e.push({name:"Profile",params:{id:t.review.creatorId}})},edit(){console.log(window.event.target.innerText)}}}},Ct={class:"review text-white p-2"},Pt={class:"bg-danger darken-10 p-2"},Ot={class:"text-end"},It=s("i",{class:"mdi mdi-star"},null,-1);function Lt(t,e,n,o,a,i){return c(),u("div",Ct,[s("div",Pt,[s("h4",{contenteditable:"",onBlur:e[0]||(e[0]=(...r)=>o.edit&&o.edit(...r))},'"'+l(n.review.comment)+'"',33),s("div",Ot,[s("p",{onClick:e[1]||(e[1]=(...r)=>o.goToProfile&&o.goToProfile(...r)),class:"action"},[s("em",null,[k("- "+l(n.review.creator.name)+" "+l(n.review.rating)+" ",1),It])])])])])}var Mt=f($t,[["render",Lt]]),Nt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Mt});function jt(t){Object.entries({"./components/Login.vue":Me,"./components/Modal.vue":He,"./components/Navbar.vue":Qe,"./components/Restaurant.vue":lt,"./components/RestaurantModal.vue":At,"./components/Review.vue":Nt}).forEach(([n,o])=>{const a=o.name||n.substr(n.lastIndexOf("/")+1).replace(/\.\w+$/,"");t.component(a,o.default)})}const K=ne(ie);jt(K);K.use(B).mount("#app");export{m as A,U as P,f as _,y as a,v as l,Ze as r};
